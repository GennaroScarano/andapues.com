!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.Starback=s():t.Starback=s()}(self,(function(){return(()=>{"use strict";var t={d:(s,e)=>{for(var i in e)t.o(e,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:e[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)},s={};t.d(s,{default:()=>e});const e=class{constructor(t,{width:s,height:e,speed:i=.5,starColor:h=["#fb00ff","#00dde0"],maxStar:a=200,starSize:r=100,directionY:o=1,directionX:n=1,distanceX:c=.1,slope:d={x:1,y:1},frequency:l=10,spread:p=1,randomOpacity:u=!1,backgroundColor:f="#ccc",showFps:m=!1}){this.canvas=t instanceof HTMLElement?t:document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.width=s,this.height=e,this.speed=i,this.directionY=-1*o,this.directionX=n,this.starColor=h,this.repeat=0,this.stars=[],this.maxStar=a,this.slope=d,this.starSize=r,this.showFps=m,this.backgroundColor=f,this.distanceX=c,this.frequency=l,this.randomOpacity=u,this.spread=p,this.frontCallbacks=[],this.behindCallbacks=[],this.fps=0,this.lastCalledTime=0,this.lastGenerated=0,this.init()}init(){this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),requestAnimationFrame((t=>this.render(t))),console.log(this.width,this.height)}update(){this.stars.map(((t,s)=>{t.progress+=t.speed}))}setBackground(){let t;"string"==typeof this.backgroundColor?t=this.backgroundColor:"object"==typeof this.backgroundColor&&(t=this.ctx.createLinearGradient(this.canvas.width/2,0,this.canvas.width/2,this.canvas.height),this.backgroundColor.forEach(((s,e)=>{t.addColorStop(e/this.backgroundColor.length,s)}))),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}randomNumber(t,s){return Math.floor(Math.random()*(s-t)+1)+t}draw(){this.ctx.strokeStyle="white",this.stars.forEach((t=>{let s;this.behindCallbacks.forEach((t=>t(ctx))),"object"==typeof this.starColor?(s=this.ctx.createLinearGradient(0,0,this.canvas.width,this.canvas.height),this.starColor.forEach(((t,e)=>s.addColorStop(e/this.starColor.length,t)))):s=this.starColor,this.ctx.save(),this.ctx.strokeStyle=s,this.ctx.beginPath(),this.ctx.moveTo(t.start.x,t.start.y),this.ctx.setLineDash([this.starSize,t.startPoint*this.frequency]),this.ctx.lineDashOffset=this.directionY*(t.progress+t.length),this.ctx.quadraticCurveTo(t.curve.x,t.curve.y,t.end.x,t.end.y),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore(),this.frontCallbacks.forEach((t=>t(this.ctx))),this.showFps&&this.drawFps()}))}generateRandomStar(){let t=this.randomNumber(-20,this.canvas.width),s=t<=0?this.randomNumber(0,this.canvas.height):0,e=this.starSize,i=t+(this.canvas.width*this.distanceX+this.spread*t*this.directionX),h=i-t,a=this.canvas.height;return this.stars.push({x:t,y:s,length:a,height:e,progress:0,speed:this.speed+Math.random()/5,lineDash:this.randomNumber(50,100),filter:{opacity:this.randomArr([this.randomNumber(20,100)+"%",!1])},start:{x:t,y:s},curve:{x:t+h*this.slope.x,y:s+this.canvas.height*this.slope.y},startPoint:this.randomNumber(10,100),end:{x:i,y:this.canvas.height}}),this.stars}addToFront(t){this.frontCallbacks.push(t)}generateStar(t){for(let s=0;s<t;s++)this.generateRandomStar()}drawFps(){this.ctx.fillStyle="white",this.ctx.fillText(`${this.fps} fps`,10,10)}render(t){this.lastCalledTime||(this.lastCalledTime=t);let s=this.lastCalledTime-t;this.fps=Math.round(1e3/s),this.lastCalledTime=t,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.setBackground(),this.draw(),this.update(),requestAnimationFrame((t=>this.render(t)))}randomArr(t){return t[Math.floor(Math.random()*t.length)]}};return s.default})()}));